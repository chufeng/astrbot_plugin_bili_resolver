<div align="center">

![:name](https://count.getloli.com/@astrbot_plugin_bili_resolver?name=astrbot_plugin_bili_resolver&theme=minecraft&padding=6&offset=0&align=top&scale=1&pixelated=1&darkmode=auto)

# astrbot_plugin_bili_resolver

_âœ¨ bilibiliå°ç»„ä»¶ç­‰è½¬é“¾çš„å·¥å…· âœ¨_

[![License](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0.html)
[![Python 3.10+](https://img.shields.io/badge/Python-3.10%2B-blue.svg)](https://www.python.org/)
[![AstrBot](https://img.shields.io/badge/AstrBot-4.0%2B-orange.svg)](https://github.com/Soulter/AstrBot)
[![GitHub](https://img.shields.io/badge/ä½œè€…-chufeng-blue)](https://github.com/chufeng)

</div>

AstrBot æ’ä»¶ â€”â€” è‡ªåŠ¨è§£æç¾¤èŠ/ç§èŠä¸­çš„ B ç«™é“¾æ¥ï¼Œè¿”å›è§†é¢‘ä¿¡æ¯æ‘˜è¦ã€‚

> æœ¬æ’ä»¶ä¸»è¦æ˜¯ä¸ºäº†é¿å…è½¬é“¾å®¹æ˜“è¢« QQ è¸¢ä¸‹çº¿çš„æƒ…å†µï¼Œæœ¬äººä»æ’ä»¶å‘å¸ƒåˆ°ç°åœ¨è¿˜æœªè¢«è¸¢ä¸‹çº¿ã€‚

## æ•ˆæœç¤ºä¾‹

ç¾¤é‡Œæœ‰äººå‘äº†ä¸€ä¸ª B ç«™é“¾æ¥æˆ–å°ç¨‹åºå¡ç‰‡ï¼Œæœºå™¨äººè‡ªåŠ¨å›å¤ï¼š

```
https://www.bilibili.com/video/av114556558967080?p=1

æ ‡é¢˜ï¼š"ç»ˆäºçŸ¥é“ä¸ºä»€ä¹ˆå¬åˆ°æŸäº›æ­Œï¼Œåæ´¾ä¼šæ„£ä½äº†ã€‚å› ä¸º...è¿™ä¹Ÿæ˜¯ä»–ä»¬çš„ç«¥å¹´å•Š..."
å°æ ‡é¢˜ï¼šTG-2025-05-23-175551094
ç±»å‹ï¼šXX | UPï¼šä¸€ç½è ¢ä¹ƒé…± | https://space.bilibili.com/3546772907493433

æ’­æ”¾ï¼š359.35ä¸‡ | å¼¹å¹•ï¼š2350 | æ”¶è—ï¼š12.97ä¸‡
ç‚¹èµï¼š28.47ä¸‡ | ç¡¬å¸ï¼š4.07ä¸‡ | è¯„è®ºï¼š2422

ç®€ä»‹ï¼š-
```

åŒæ—¶é™„å¸¦è§†é¢‘å°é¢å›¾ã€‚

## æ”¯æŒçš„é“¾æ¥æ ¼å¼

| ç±»å‹ | ç¤ºä¾‹ |
|------|------|
| çŸ­é“¾ | `https://b23.tv/xxx` |
| è§†é¢‘ | `bilibili.com/video/av...` æˆ– `BV...` |
| ç•ªå‰§ | `bilibili.com/bangumi/play/ep...` / `ss...` / `md...` |
| ä¸“æ æ–‡ç«  | `bilibili.com/read/cv...` |
| åŠ¨æ€ | `bilibili.com/opus/...` æˆ– `t.bilibili.com/...` |
| QQ å°ç¨‹åºå¡ç‰‡ | åˆ†äº« B ç«™å†…å®¹åˆ° QQ çš„å¡ç‰‡æ¶ˆæ¯ |

## æŒ‡ä»¤

| æŒ‡ä»¤ | è¯´æ˜ |
|------|------|
| `/æœè§†é¢‘ å…³é”®è¯` | æœç´¢ B ç«™è§†é¢‘ï¼Œè¿”å›ç¬¬ä¸€ä¸ªç»“æœçš„è§£æä¿¡æ¯ |

## å®‰è£…

**æ¨è**ï¼šåœ¨ AstrBot WebUI çš„æ’ä»¶ç®¡ç†é¡µé¢ï¼Œæœç´¢ `astrbot_plugin_bili_resolver` ä¸€é”®å®‰è£…ã€‚

æ‰‹åŠ¨å®‰è£…ï¼šå°†æ’ä»¶ç›®å½•æ”¾å…¥ AstrBot çš„ `data/plugins/` ç›®å½•ä¸‹ï¼Œé‡å¯æˆ–çƒ­é‡è½½å³å¯ã€‚

## é…ç½®

å®‰è£…åå¯åœ¨ AstrBot WebUI æ’ä»¶ç®¡ç†é¢æ¿ä¸­ä¿®æ”¹ï¼Œæ— éœ€ç¼–è¾‘æ–‡ä»¶ã€‚

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|-------|------|-------|------|
| `enable_auto_parse` | bool | `true` | è‡ªåŠ¨è§£æå¼€å…³ |
| `enable_search` | bool | `true` | `/æœè§†é¢‘` æŒ‡ä»¤å¼€å…³ |
| `enable_image` | bool | `true` | å›å¤ä¸­æ˜¯å¦æ˜¾ç¤ºå°é¢å›¾ |
| `group_whitelist_mode` | bool | `false` | ç™½åå•æ¨¡å¼ï¼ˆå¼€å¯=ä»…åˆ—è¡¨ä¸­çš„ç¾¤ç”Ÿæ•ˆï¼Œå…³é—­=é»‘åå•æ¨¡å¼ï¼‰ |
| `group_list` | list | `[]` | ç¾¤ç»„ ID åˆ—è¡¨ |
| `template_preset` | string | `ç®€æ´é£æ ¼` | è§†é¢‘è§£ææ’ç‰ˆé£æ ¼ï¼Œè§ä¸‹æ–¹è¯´æ˜ |
| `video_template` | text | `` | è‡ªå®šä¹‰æ’ç‰ˆæ¨¡æ¿ï¼Œä»…åœ¨ `template_preset` ä¸º `è‡ªå®šä¹‰` æ—¶ç”Ÿæ•ˆ |

**ç™½åå•æ¨¡å¼**ï¼šåªæœ‰åˆ—è¡¨ä¸­çš„ç¾¤è§¦å‘ï¼Œå…¶ä»–ç¾¤å¿½ç•¥ã€‚
**é»‘åå•æ¨¡å¼**ï¼ˆé»˜è®¤ï¼‰ï¼šåˆ—è¡¨ä¸­çš„ç¾¤ä¸è§¦å‘ï¼Œå…¶ä»–ç¾¤æ­£å¸¸ã€‚åˆ—è¡¨ä¸ºç©ºåˆ™æ‰€æœ‰ç¾¤ç”Ÿæ•ˆã€‚

### è§†é¢‘æ’ç‰ˆé£æ ¼

é€šè¿‡ `template_preset` é€‰æ‹©è§†é¢‘è§£æçš„è¾“å‡ºæ ¼å¼ï¼š

**åŸå§‹æ ¼å¼**ï¼šæ’ä»¶å†…ç½®çš„çº¯æ–‡å­—æ ¼å¼ã€‚

```
https://www.bilibili.com/video/av114556558967080

æ ‡é¢˜ï¼š"ç»ˆäºçŸ¥é“ä¸ºä»€ä¹ˆå¬åˆ°æŸäº›æ­Œï¼Œåæ´¾ä¼šæ„£ä½äº†"
ç±»å‹ï¼šç»¼åˆ | UPï¼šä¸€ç½è ¢ä¹ƒé…± | https://space.bilibili.com/xxx

æ’­æ”¾ï¼š359.35ä¸‡ | å¼¹å¹•ï¼š2350 | æ”¶è—ï¼š12.97ä¸‡
ç‚¹èµï¼š28.47ä¸‡ | ç¡¬å¸ï¼š4.07ä¸‡ | è¯„è®ºï¼š2422

ç®€ä»‹ï¼š-
```

**ç®€æ´é£æ ¼**ï¼ˆé»˜è®¤ï¼‰ï¼šå¸¦ Emoji çš„å¡ç‰‡æ ¼å¼ï¼ŒåŒæ—¶é™„å¸¦å°é¢å›¾ã€‚

```
ğŸ¬ æ ‡é¢˜ï¼šç»ˆäºçŸ¥é“ä¸ºä»€ä¹ˆå¬åˆ°æŸäº›æ­Œï¼Œåæ´¾ä¼šæ„£ä½äº†
ğŸ‘¤ UPä¸»ï¼šä¸€ç½è ¢ä¹ƒé…±
ğŸ“ ç®€ä»‹ï¼š-
[å°é¢å›¾]
ğŸ‘ ç‚¹èµï¼š28.47ä¸‡ ğŸª™ æŠ•å¸ï¼š4.07ä¸‡
â¤ï¸ æ”¶è—ï¼š12.97ä¸‡ ğŸ”„ è½¬å‘ï¼š1234
ğŸ‘€ è§‚çœ‹ï¼š359.35ä¸‡ ğŸ’¬ å¼¹å¹•ï¼š2350
```

**è‡ªå®šä¹‰**ï¼šåœ¨ `video_template` æ–‡æœ¬æ¡†ä¸­å¡«å…¥è‡ªå®šä¹‰æ¨¡æ¿ï¼Œä½¿ç”¨å˜é‡å ä½ç¬¦è‡ªç”±æ’ç‰ˆã€‚

æ”¯æŒçš„å˜é‡ï¼š

| å˜é‡ | è¯´æ˜ |
|------|------|
| `${æ ‡é¢˜}` | è§†é¢‘æ ‡é¢˜ |
| `${UPä¸»}` | UP ä¸»åç§° |
| `${UPä¸»é“¾æ¥}` | UP ä¸»ç©ºé—´é“¾æ¥ |
| `${ç®€ä»‹}` | è§†é¢‘ç®€ä»‹ï¼ˆæœ€å¤š 3 è¡Œï¼‰ |
| `${å°é¢}` | å°é¢å›¾ï¼ˆæ¸²æŸ“ä¸ºå›¾ç‰‡ï¼Œå—ã€Œæ˜¾ç¤ºå°é¢ã€å¼€å…³æ§åˆ¶ï¼‰ |
| `${ç‚¹èµ}` | ç‚¹èµæ•° |
| `${æŠ•å¸}` | æŠ•å¸æ•° |
| `${æ”¶è—}` | æ”¶è—æ•° |
| `${è½¬å‘}` | è½¬å‘æ•° |
| `${è§‚çœ‹}` | æ’­æ”¾æ•° |
| `${å¼¹å¹•æ•°é‡}` | å¼¹å¹•æ•° |
| `${è¯„è®º}` | è¯„è®ºæ•° |
| `${é“¾æ¥}` | è§†é¢‘é“¾æ¥ |
| `${å‘å¸ƒæ—¶é—´}` | å‘å¸ƒæ—¶é—´ |
| `${ç±»å‹}` | è§†é¢‘åˆ†åŒº |
| `${BVå·}` | BV å· |
| `${æ—¶é•¿}` | è§†é¢‘æ—¶é•¿ï¼ˆæ ¼å¼ï¼š`m:ss` / `h:mm:ss`ï¼‰ |
| `${ç‰ˆæƒ}` | åŸåˆ› / è½¬è½½ |

## ä¾èµ–

- Python >= 3.10
- AstrBot
- aiohttp
